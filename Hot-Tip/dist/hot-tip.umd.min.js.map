{"version":3,"file":"hot-tip.umd.min.js","sources":["../src/HotTipContext.js","../src/action-types.js","../../node_modules/@babel/runtime/helpers/esm/extends.js","../src/utils.js","../src/HotTip.js","../src/HotTipAnchor.js","../src/reducer.js","../src/HotTipProvider.js"],"sourcesContent":["import { createContext } from \"react\"\n\nexport const HotTipContext = createContext({})\nexport const HotTipConsumer = HotTipContext.Consumer\n","export const UPDATE_TOOLTIP = 'HOT_TIP::UPDATE_TOOLTIP'\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export const getBottom = (bounds, force) => {\n  const {left, top, width, height, clientWidth, clientHeight} = bounds\n\n  if (!force && top + height + 40 >= clientHeight) {\n    return getTop(bounds, true) // eslint-disable-line\n  }\n  const x = left + width / 2\n  const y = top + height\n  const leftOffset = x < 100\n  const rightOffset = !leftOffset && x + 100 > clientWidth\n  const layoutClass = leftOffset\n    ? 'left-offset'\n    : rightOffset\n    ? 'right-offset'\n    : 'centred' // eslint-disable-line\n\n  return {\n    x,\n    y,\n    positionClass: 'bottom',\n    layoutClass,\n  }\n}\n\nexport const getTop = (bounds, force) => {\n  const {top} = bounds\n  const bottom = getBottom(bounds, true)\n\n  if (!force && top - 40 <= 0) {\n    return bottom\n  }\n\n  return {...bottom, y: top, positionClass: 'top'}\n}\n\nexport const getRight = (bounds, force) => {\n  const {left, top, width, height, clientWidth, clientHeight} = bounds\n\n  if (!force && left + width + 200 >= clientWidth) {\n    return getLeft(bounds, true) // eslint-disable-line\n  }\n  const x = left + width\n  const y = top + height / 2\n  const topOffset = y < 50\n  const bottomOffset = !topOffset && y + 50 > clientHeight\n  const layoutClass = topOffset\n    ? 'top-offset'\n    : bottomOffset\n    ? 'bottom-offset'\n    : 'mid' // eslint-disable-line\n\n  return {\n    x,\n    y,\n    positionClass: 'right',\n    layoutClass,\n  }\n}\n\nexport const getLeft = (bounds, force) => {\n  const {left} = bounds\n  const right = getRight(bounds, force)\n\n  if (!force && left - 200 <= 0) {\n    return right\n  }\n\n  return {...right, x: left, positionClass: 'left'}\n}\n\nexport const getPosition = position => {\n  switch (position) {\n    case 'top':\n      return getTop\n    case 'right':\n      return getRight\n    case 'left':\n      return getLeft\n    case 'bottom':\n    default:\n      return getBottom\n  }\n}\n\nexport const getBounds = e => {\n  const {top, left, width, height} = e.currentTarget.getBoundingClientRect()\n  const {pageXOffset, pageYOffset} = window\n  const {\n    scrollTop,\n    clientTop,\n    scrollLeft,\n    clientLeft,\n    clientWidth,\n    clientHeight,\n  } = document.body\n  const absTop = top + Math.max(pageYOffset, scrollTop) - clientTop\n  const absLeft = left + Math.max(pageXOffset, scrollLeft) - clientLeft\n\n  return {\n    top: absTop,\n    left: absLeft,\n    width,\n    height,\n    clientWidth,\n    clientHeight,\n  }\n}\n\nexport default {\n  getBounds,\n  getPosition,\n}\n","import { useContext, useEffect, createElement, cloneElement } from \"react\"\nimport PropTypes from \"prop-types\"\nimport { HotTipContext } from \"./HotTipContext\"\nimport * as types from \"./action-types\"\nimport { getPosition, getBounds } from \"./utils\"\n\nexport default function HotTip({ position = \"bottom\", tip, children }) {\n  const dispatch = useContext(HotTipContext)[1]\n  useEffect(\n    () => () => {\n      dispatch(clearTooltip())\n    },\n    []\n  )\n\n  function handleMouseEnter(e) {\n    const bounds = getBounds(e)\n    const actualPosition = getPosition(position)(bounds)\n\n    dispatch(addTooltip(tip, actualPosition))\n  }\n  const handleMouseOut = () => dispatch(clearTooltip())\n\n  if (tip) {\n    if (typeof children === \"string\") {\n      return createElement(\n        \"span\",\n        {\n          onMouseOver: handleMouseEnter,\n          onMouseOut: handleMouseOut,\n        },\n        children\n      )\n    }\n    return cloneElement(children, {\n      onMouseOver: handleMouseEnter,\n      onMouseOut: handleMouseOut,\n    })\n  }\n  return children\n}\n\nHotTip.defaultProps = {\n  position: \"bottom\",\n  tip: \"\",\n}\n\nHotTip.propTypes = {\n  children: PropTypes.node.isRequired,\n  position: PropTypes.oneOf([\"top\", \"bottom\", \"left\", \"right\"]).isRequired,\n  tip: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n}\n\nexport function addTooltip(tip, position) {\n  return {\n    type: types.UPDATE_TOOLTIP,\n    payload: {\n      tip,\n      visible: true,\n      position,\n    },\n  }\n}\n\nexport function clearTooltip() {\n  return {\n    type: types.UPDATE_TOOLTIP,\n    payload: {\n      visible: false,\n    },\n  }\n}\n","import React, { useContext } from \"react\"\nimport { HotTipContext } from \"./HotTipContext\"\n\nexport default function HotTipAnchor() {\n  const [state] = useContext(HotTipContext)\n  const { tip, positionClass, layoutClass, visible, x, y } = state\n  const isNode = typeof tip !== \"function\"\n  const className = [\"hot-tip\", positionClass, layoutClass].join(\" \")\n\n  return (\n    Boolean(visible) && (\n      <div className={className} style={{ top: y, left: x }}>\n        <div className=\"ht-point\" />\n        <div className=\"ht-body\">{isNode ? tip : tip()}</div>\n      </div>\n    )\n  )\n}\n\nHotTipAnchor.displayName = \"HotTipAnchor\"\n","import * as types from \"./action-types\"\n\nexport default function hotTipReducer(state = {}, { type, payload }) {\n  switch (type) {\n    case types.UPDATE_TOOLTIP:\n      return {\n        ...state,\n        tip: payload.tip,\n        visible: payload.visible,\n        ...payload.position,\n      }\n    default:\n      return state\n  }\n}\n","import React, { useReducer } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { HotTipContext } from \"./HotTipContext\";\nimport HotTipAnchor from \"./HotTipAnchor\";\nimport HotTipReducer from \"./reducer\";\n\nexport default function HotTipProvider({ children }) {\n  const context = useReducer(HotTipReducer, {});\n\n  return (\n    <HotTipContext.Provider value={context}>\n      <>\n        <HotTipAnchor />\n        {children}\n      </>\n    </HotTipContext.Provider>\n  );\n}\n\nHotTipProvider.propTypes = {\n  children: PropTypes.node\n};\n"],"names":["HotTipContext","createContext","UPDATE_TOOLTIP","Consumer","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","getBottom","bounds","force","left","top","width","height","clientWidth","clientHeight","getTop","x","leftOffset","y","positionClass","layoutClass","bottom","getRight","getLeft","topOffset","right","getPosition","position","getBounds","e","currentTarget","getBoundingClientRect","window","pageXOffset","pageYOffset","document","body","scrollTop","clientTop","scrollLeft","clientLeft","Math","max","HotTip","tip","children","dispatch","useContext","handleMouseEnter","actualPosition","type","types","payload","visible","addTooltip","useEffect","clearTooltip","handleMouseOut","createElement","onMouseOver","onMouseOut","cloneElement","HotTipAnchor","state","className","join","Boolean","React","style","hotTipReducer","defaultProps","displayName","context","useReducer","HotTipReducer","Provider","value"],"mappings":"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"}